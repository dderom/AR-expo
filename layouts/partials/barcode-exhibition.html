
  <body>
    <a-scene vcursor='rayOrigin: mouse; fuse: true; fuseTimeout: 0;'
          raycaster="objects: [clickhandler];"
          vr-mode-ui="enabled: false"
  		embedded
  	 arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: {{ .Params.marker_type_sets}};">
        <!-- Check if there is a sky -->
        {{ if .Params.sky }}
        <a-assets>
            <img id="sky" src="{{.Params.sky_image}}">

        </a-assets>
        <!-- Using the asset management system. -->
        <a-sky src="#sky"></a-sky>
        {{end}}
        <!-- Get some data before your process -->
        {{ $exhibition_type := .Params.exhibition_types}}
        {{ $artTypeExhibition := .Params.artType }}
        {{$dynamic_annotations:= .Params.dynamic_annotations }}
        {{ range .RegularPages }}
            <!--  Get all the data from the exhibition item ref -->
            {{ $position := .Params.position_artwork }}
            {{ $size := .Params.size_artwork }}
            {{ $exhibition_marker_type_set := .Parent.Params.marker_type_sets }}
            {{ $marker_id := .Params.marker_id }}

            <!-- Now start fetching related content -->
            {{ range .Site.RegularPages.Related . }}
                  {{ if eq .Type "artworks"}}
                      {{ if eq .Params.artType "2d"}}

                      <a-marker markerhandler type="{{$exhibition_type}}" value="{{$marker_id}}" id="{{$marker_id}}">
                        <a-image rotation="90 0 180" position="{{ $position }}" scale="{{ $size }}" src="/AR-expo/public/artworks/{{ .Params.model }}">
                        </a-image>

                      </a-marker>

                      {{ else }}

                      <a-marker markerhandler type="{{$exhibition_type}}" value="{{$marker_id}}" smooth="true" smoothCount="20" id="{{$marker_id}}">
                        <a-entity position="{{ $position }}" scale="{{ $size }}" gltf-model="/AR-expo/public/artworks/{{ .Params.model }}">
                        </a-entity>
                        {{if $dynamic_annotations }}
                          <a-sphere clickhandler position="0.571 1.344 -3.557" scale="0.1 0.1 0.1" color="black" wireframe=true></a-sphere>
                        {{end}}
                      </a-marker>
                      {{end}}
                    {{ end}}

            {{ end }}
        {{ end }}



    <!-- add a simple camera -->
    <a-entity camera></a-entity>
    <!-- add cursor entity if set true -->
    {{if .Params.dynamic_annotations }}
    <a-entity cursor="rayOrigin:mouse"></a-entity>
    {{end}}
  </a-scene>
